<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>Canvas - test</title>
<style>
*{margin: 0;padding: 0;}
</style>

</head>
<body>

<canvas id="canvas" style="position: absolute; height: 100%; width:100%;"></canvas>

    
    
    
<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/camera.js"></script>
<script>

function getRgb(r, g, b) {
    return "rgb(" + r + "," + g + "," + b + ")";
}
var requestAnimFrame = (function() {
    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
    function(callback, element) {
        window.setTimeout(callback, 1000 / 60);
    };
})();

var canvasEl = document.getElementById("canvas");
var ctx = canvasEl.getContext('2d');
var camera = new Camera(ctx);
    
var c_cam = {}; //Cam参数
var c_mouse = {}; //鼠标参数
var c_opt = {}; //全局参数
var c_my = {}; //自机
var c_stars = [];
    
var test = 20;

c_opt.bgColor = '#000';
c_opt.h = canvasEl.height = canvasEl.clientHeight;
c_opt.w = canvasEl.width = canvasEl.clientWidth;

c_cam.x = 0.5*c_opt.h;
c_cam.y = 0.5*c_opt.w;
    
console.log(c_cam.x);
console.log(c_cam.y);
c_cam.z = 1000;
    

    
window.onresize = function() { //侦听窗口变化
    c_opt.h = canvasEl.height = canvasEl.clientHeight;
    c_opt.w = canvasEl.width = canvasEl.clientWidth;
}
window.onmousemove = function(e) { //侦听鼠标
    c_mouse.x = e.clientX;
    c_mouse.y = e.clientY;
}

update();
function move(mx, my) {
    c_my.x += mx;
    c_my.y += my;
}

function update() {
    //camera.moveTo(c_cam.x,c_cam.y);
    //camera.zoomTo(c_cam.z);
    
    render();
    window.requestAnimFrame(update);
}

function render() {
    camera.begin();
    //camera.moveTo(0.5*c_opt.h,0.5*c_opt.y); 
    ctx.fillStyle = c_opt.bgColor;
    ctx.fillRect(0, 0, canvasEl.width, canvasEl.height);
    
    c_cam.x+=0.1;
    //test+=0.1;
    
    
    ctx.fillStyle = "#0000ff";
    ctx.fillRect(20, 20, 150, 100);
    camera.end();
}

//End Main


    </script>
</body>
